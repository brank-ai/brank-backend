{
  "info": {
    "name": "Brank Backend API",
    "description": "Backend API for Brank - Brand visibility metrics across 4 major LLMs (ChatGPT, Gemini, Grok, Perplexity)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/health",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "health"
          ]
        },
        "description": "Health check endpoint to verify the API is running.\n\n**Response:**\n```json\n{\n  \"status\": \"healthy\"\n}\n```"
      },
      "response": [
        {
          "name": "Success",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"status\": \"healthy\"\n}"
        }
      ]
    },
    {
      "name": "Get Brand Metrics",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/metric?website={{website}}",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "metric"
          ],
          "query": [
            {
              "key": "website",
              "value": "{{website}}",
              "description": "Brand website (e.g., samsung.com, apple.com)"
            }
          ]
        },
        "description": "Get brand visibility metrics across 4 major LLMs.\n\n**Query Parameters:**\n- `website` (required): Brand website (e.g., samsung.com)\n\n**Response Structure:**\n```json\n{\n  \"brand_id\": \"uuid\",\n  \"website\": \"samsung.com\",\n  \"cached\": false,\n  \"averageMentionRate\": 0.8,\n  \"citations\": 0.6,\n  \"averageSentiment\": 75.0,\n  \"averageRanking\": 2,\n  \"mentionRateByLLM\": {\"chatgpt\": 0.8, \"gemini\": 0.75, ...},\n  \"citationsByLLM\": {\"chatgpt\": 0.6, \"gemini\": 0.55, ...},\n  \"citationOverview\": {\n    \"chatgpt\": [{\"url\": \"https://samsung.com\", \"percentage\": 80.0}, ...],\n    ...\n  },\n  \"rankingOverview\": {\n    \"topBrands\": [{\"brand\": \"samsung\", \"rank\": 1.5}, ...],\n    \"currentBrand\": {\"brand\": \"Samsung\", \"rank\": 1.5}\n  },\n  \"rankByLLMs\": {\"chatgpt\": 1.5, \"gemini\": 2.0, ...},\n  \"computed_at\": \"2026-01-09T10:30:00Z\"\n}\n```\n\n**Metrics Explained:**\n- `averageMentionRate`: Average mention rate across all LLMs (0.0-1.0)\n- `citations`: Average citation rate for brand's domain across all LLMs (0.0-1.0)\n- `averageSentiment`: Average sentiment score (0-100, higher = more positive)\n- `averageRanking`: Average brand rank rounded up (1 = best)\n- `mentionRateByLLM`: Mention rate per LLM\n- `citationsByLLM`: Citation rate per LLM\n- `citationOverview`: Top 5 cited domains per LLM with percentages\n- `rankingOverview`: Top 7 brands overall + current brand position\n- `rankByLLMs`: Brand rank per LLM\n\n**Caching:**\n- Results are cached for 24 hours\n- `cached: true` indicates returned from cache\n- `cached: false` indicates fresh computation\n\n**Status Codes:**\n- 200: Success (may include partial failures for individual LLMs)\n- 400: Missing or invalid website parameter\n- 500: Internal server error"
      },
      "response": [
        {
          "name": "Success - Samsung",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/metric?website=samsung.com",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metric"
              ],
              "query": [
                {
                  "key": "website",
                  "value": "samsung.com"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"brand_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"website\": \"samsung.com\",\n  \"cached\": false,\n  \"averageMentionRate\": 0.837,\n  \"citations\": 0.65,\n  \"averageSentiment\": 78.1,\n  \"averageRanking\": 2,\n  \"mentionRateByLLM\": {\n    \"chatgpt\": 0.8,\n    \"gemini\": 0.7,\n    \"grok\": 0.9,\n    \"perplexity\": 0.95\n  },\n  \"citationsByLLM\": {\n    \"chatgpt\": 0.6,\n    \"gemini\": 0.55,\n    \"grok\": 0.7,\n    \"perplexity\": 0.75\n  },\n  \"sentimentScoreByLLM\": {\n    \"chatgpt\": 75.2,\n    \"gemini\": 79.5,\n    \"grok\": 80.1,\n    \"perplexity\": 77.6\n  },\n  \"citationOverview\": {\n    \"chatgpt\": [\n      {\"url\": \"https://samsung.com\", \"percentage\": 80.0},\n      {\"url\": \"https://gsmarena.com\", \"percentage\": 60.0},\n      {\"url\": \"https://androidauthority.com\", \"percentage\": 45.0}\n    ],\n    \"gemini\": [\n      {\"url\": \"https://samsung.com\", \"percentage\": 70.0},\n      {\"url\": \"https://theverge.com\", \"percentage\": 50.0}\n    ],\n    \"grok\": [\n      {\"url\": \"https://samsung.com\", \"percentage\": 90.0},\n      {\"url\": \"https://techcrunch.com\", \"percentage\": 55.0}\n    ],\n    \"perplexity\": [\n      {\"url\": \"https://samsung.com\", \"percentage\": 95.0},\n      {\"url\": \"https://cnet.com\", \"percentage\": 60.0}\n    ]\n  },\n  \"rankingOverview\": {\n    \"topBrands\": [\n      {\"brand\": \"apple\", \"rank\": 1.2},\n      {\"brand\": \"samsung\", \"rank\": 1.6},\n      {\"brand\": \"google\", \"rank\": 2.3},\n      {\"brand\": \"microsoft\", \"rank\": 3.1},\n      {\"brand\": \"amazon\", \"rank\": 3.5},\n      {\"brand\": \"meta\", \"rank\": 4.0},\n      {\"brand\": \"dell\", \"rank\": 4.2}\n    ],\n    \"currentBrand\": {\"brand\": \"Samsung\", \"rank\": 1.6}\n  },\n  \"rankByLLMs\": {\n    \"chatgpt\": 1.75,\n    \"gemini\": 2.1,\n    \"grok\": 1.5,\n    \"perplexity\": 1.2\n  },\n  \"computed_at\": \"2026-01-10T10:30:00Z\"\n}"
        },
        {
          "name": "Success - Cached",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/metric?website=apple.com",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metric"
              ],
              "query": [
                {
                  "key": "website",
                  "value": "apple.com"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"brand_id\": \"650e8400-e29b-41d4-a716-446655440001\",\n  \"website\": \"apple.com\",\n  \"cached\": true,\n  \"averageMentionRate\": 0.925,\n  \"citations\": 0.85,\n  \"averageSentiment\": 86.5,\n  \"averageRanking\": 1,\n  \"mentionRateByLLM\": {\n    \"chatgpt\": 0.95,\n    \"gemini\": 0.9,\n    \"grok\": 0.92,\n    \"perplexity\": 0.93\n  },\n  \"citationsByLLM\": {\n    \"chatgpt\": 0.8,\n    \"gemini\": 0.85,\n    \"grok\": 0.88,\n    \"perplexity\": 0.87\n  },\n  \"sentimentScoreByLLM\": {\n    \"chatgpt\": 85.3,\n    \"gemini\": 88.2,\n    \"grok\": 86.1,\n    \"perplexity\": 86.4\n  },\n  \"citationOverview\": {\n    \"chatgpt\": [\n      {\"url\": \"https://apple.com\", \"percentage\": 95.0},\n      {\"url\": \"https://macrumors.com\", \"percentage\": 70.0}\n    ],\n    \"gemini\": [\n      {\"url\": \"https://apple.com\", \"percentage\": 90.0}\n    ],\n    \"grok\": [\n      {\"url\": \"https://apple.com\", \"percentage\": 92.0}\n    ],\n    \"perplexity\": [\n      {\"url\": \"https://apple.com\", \"percentage\": 93.0}\n    ]\n  },\n  \"rankingOverview\": {\n    \"topBrands\": [\n      {\"brand\": \"apple\", \"rank\": 1.0},\n      {\"brand\": \"samsung\", \"rank\": 1.8},\n      {\"brand\": \"google\", \"rank\": 2.5},\n      {\"brand\": \"microsoft\", \"rank\": 3.2}\n    ],\n    \"currentBrand\": {\"brand\": \"Apple\", \"rank\": 1.0}\n  },\n  \"rankByLLMs\": {\n    \"chatgpt\": 1.2,\n    \"gemini\": 1.0,\n    \"grok\": 1.1,\n    \"perplexity\": 0.9\n  },\n  \"computed_at\": \"2026-01-10T08:00:00Z\"\n}"
        },
        {
          "name": "Error - Missing Website",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/metric",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metric"
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"error\": \"website parameter is required\"\n}"
        },
        {
          "name": "Error - Internal Server Error",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/metric?website=example.com",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metric"
              ],
              "query": [
                {
                  "key": "website",
                  "value": "example.com"
                }
              ]
            }
          },
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"error\": \"Internal server error\"\n}"
        }
      ]
    },
    {
      "name": "Get Landing Page Metrics",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/metrics/landingPage",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "metrics",
            "landingPage"
          ]
        },
        "description": "Get average mention rates for landing page brands.\n\nReturns average mention rate percentages (0-100) for a fixed list of brands:\n- decathlon\n- leetcode\n- asics\n- zerodha\n- coinbase\n- nothing\n- cult.fit\n\n**Response Structure:**\n```json\n{\n  \"decathlon\": 71.0,\n  \"leetcode\": 23.5,\n  \"asics\": 45.2,\n  \"zerodha\": 68.3,\n  \"coinbase\": 71.0,\n  \"nothing\": 71.0,\n  \"cult.fit\": 71.0\n}\n```\n\n**Notes:**\n- Values are percentages (0-100)\n- If a brand has no data in the database, returns default value of 71.0\n- Average is computed across all LLMs for each brand\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error"
      },
      "response": [
        {
          "name": "Success",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/metrics/landingPage",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metrics",
                "landingPage"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"asics\": 45.2,\n  \"coinbase\": 71.0,\n  \"cult.fit\": 71.0,\n  \"decathlon\": 71.0,\n  \"leetcode\": 23.5,\n  \"nothing\": 71.0,\n  \"zerodha\": 68.3\n}"
        },
        {
          "name": "Error - Internal Server Error",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/metrics/landingPage",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metrics",
                "landingPage"
              ]
            }
          },
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"error\": \"Internal server error\"\n}"
        }
      ]
    },
    {
      "name": "Create Brand Insight Request",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"brand_name\": \"Nike\",\n  \"email\": \"user@example.com\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/brand-insight-request",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "brand-insight-request"
          ]
        },
        "description": "Record a brand insight request from the landing page modal.\n\n**Request Body (JSON):**\n- `brand_name` (required): Name of the brand\n- `email` (required): User's email address\n\n**Response Structure:**\n```json\n{\n  \"message\": \"Brand insight request recorded successfully\",\n  \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}\n```\n\n**Status Codes:**\n- 201: Created successfully\n- 400: Missing required fields\n- 500: Internal server error"
      },
      "response": [
        {
          "name": "Success",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"brand_name\": \"Nike\",\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/brand-insight-request",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "brand-insight-request"
              ]
            }
          },
          "status": "Created",
          "code": 201,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"message\": \"Brand insight request recorded successfully\",\n  \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}"
        },
        {
          "name": "Error - Missing Brand Name",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/brand-insight-request",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "brand-insight-request"
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"error\": \"brand_name is required\"\n}"
        },
        {
          "name": "Error - Missing Email",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"brand_name\": \"Nike\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/brand-insight-request",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "brand-insight-request"
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"error\": \"email is required\"\n}"
        },
        {
          "name": "Error - Internal Server Error",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"brand_name\": \"Nike\",\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/brand-insight-request",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "brand-insight-request"
              ]
            }
          },
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"error\": \"Internal server error\"\n}"
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "website",
      "value": "samsung.com",
      "type": "string"
    }
  ]
}
